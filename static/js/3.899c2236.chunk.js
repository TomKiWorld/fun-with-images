(this["webpackJsonpfun-with-images"]=this["webpackJsonpfun-with-images"]||[]).push([[3],{243:function(e,t,a){e.exports=a.p+"static/media/FaceOne.2fe015e1.svg"},244:function(e,t,a){e.exports=a.p+"static/media/FaceTwo.94a805f3.svg"},245:function(e,t,a){e.exports=a.p+"static/media/FaceThree.11ca4909.svg"},246:function(e,t,a){e.exports=a.p+"static/media/FaceFour.3a91bf1c.svg"},247:function(e,t,a){"use strict";var n=a(0),o=a.n(n),i=a(243),s=a.n(i),r=a(244),c=a.n(r),l=a(245),u=a.n(l),m=a(246),p=a.n(m),h=(a(248),function(e,t){return e===t?"avatar-img hyve grow selected":"avatar-img hyve grow"});t.a=function(e){var t=e.title,a=e.avatar,n=e.selectAvatar;return o.a.createElement("div",null,o.a.createElement("p",{className:"db fw6 lh-copy f6"},t),o.a.createElement("div",{className:"profile-avatars"},o.a.createElement("img",{className:h("avatarOne",a),src:s.a,alt:"Avatar one",onClick:function(){return n("avatarOne")}}),o.a.createElement("img",{className:h("avatarTwo",a),src:c.a,alt:"Avatar two",onClick:function(){return n("avatarTwo")}}),o.a.createElement("img",{className:h("avatarThree",a),src:u.a,alt:"Avatar three",onClick:function(){return n("avatarThree")}}),o.a.createElement("img",{className:h("avatarFour",a),src:p.a,alt:"Avatar four",onClick:function(){return n("avatarFour")}})))}},248:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},257:function(e,t,a){"use strict";a.r(t);var n=a(8),o=a(9),i=a(11),s=a(10),r=a(0),c=a.n(r),l=a(33),u=a(18),m=a(3),p=a(1),h=(a(252),a(253),function(e){var t=e.id,a=e.url,n=e.onResubmit;return c.a.createElement("div",{id:"ImageCard-".concat(t),className:"ImageCard",style:{backgroundImage:'url("'.concat(a,'")')}},c.a.createElement("button",{className:"cta-button grow",onClick:function(){return n(a)}},"Resubmit"))}),d=a(50),g=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;Object(n.a)(this,a),(o=t.call(this,e)).state={style:{}};return o.width=null,o.height=null,o.left=null,o.top=null,o.transitionTimeout=null,o.updateCall=null,o.element=null,o.settings=Object.assign({},{reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0},o.props.options),o.reverse=o.settings.reverse?-1:1,o.onMouseEnter=o.onMouseEnter.bind(Object(d.a)(o),o.props.onMouseEnter),o.onMouseMove=o.onMouseMove.bind(Object(d.a)(o),o.props.onMouseMove),o.onMouseLeave=o.onMouseLeave.bind(Object(d.a)(o),o.props.onMouseLeave),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.element=document.getElementById(this.props.elementId)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}},{key:"onMouseEnter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Object(m.a)(Object(m.a)({},this.state.style),{},{willChange:"transform"})})),this.setTransition(),e(t)}},{key:"reset",value:function(){var e=this;window.requestAnimationFrame((function(){e.setState(Object.assign({},e.state,{style:Object(m.a)(Object(m.a)({},e.state.style),{},{transform:"perspective(".concat(e.settings.perspective,"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)")})}))}))}},{key:"onMouseMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return t.persist(),null!==this.updateCall&&window.cancelAnimationFrame(this.updateCall),this.event=t,this.updateCall=requestAnimationFrame(this.update.bind(this,t)),e(t)}},{key:"setTransition",value:function(){var e=this;clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Object(m.a)(Object(m.a)({},this.state.style),{},{transition:"".concat(this.settings.speed,"ms ").concat(this.settings.easing)})})),this.transitionTimeout=setTimeout((function(){e.setState(Object.assign({},e.state,{style:Object(m.a)(Object(m.a)({},e.state.style),{},{transition:""})}))}),this.settings.speed)}},{key:"onMouseLeave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return this.setTransition(),this.settings.reset&&this.reset(),e(t)}},{key:"getValues",value:function(e){var t=(e.nativeEvent.clientX-this.left)/this.width,a=(e.nativeEvent.clientY-this.top)/this.height,n=Math.min(Math.max(t,0),1),o=Math.min(Math.max(a,0),1);return{tiltX:(this.reverse*(this.settings.max/2-n*this.settings.max)).toFixed(2),tiltY:(this.reverse*(o*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*n,percentageY:100*o}}},{key:"updateElementPosition",value:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}},{key:"update",value:function(e){var t=this.getValues(e);this.setState(Object.assign({},this.state,{style:Object(m.a)(Object(m.a)({},this.state.style),{},{transform:"perspective(".concat(this.settings.perspective,"px)\n                      rotateX(").concat("x"===this.settings.axis?0:t.tiltY,"deg)\n                      rotateY(").concat("y"===this.settings.axis?0:t.tiltX,"deg)\n                      scale3d(").concat(this.settings.scale,", ").concat(this.settings.scale,", ").concat(this.settings.scale,")")})})),this.updateCall=null}},{key:"render",value:function(){var e=Object.assign({},this.props.style,this.state.style);return c.a.createElement("div",{style:e,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,options:{max:25}},this.props.children)}}]),a}(r.Component),v=function(e){var t=e.images,a=e.onResubmit;return c.a.createElement("div",{className:"images-container"},t.map((function(e){return c.a.createElement(g,{key:e.id,elementId:"ImageCard-".concat(e.id)},c.a.createElement(h,{key:e.id,id:e.id,url:e.url,onResubmit:a}))})))},f=a(21),b=function(e){var t=e.entries;return t>0?c.a.createElement("div",null,c.a.createElement("p",null,"Thank you for using the app ",t," times so far!!"),c.a.createElement("h3",null,"The following images were submitted by you:"),c.a.createElement("p",null,"Note: Some images might have been submitted several times")):c.a.createElement("h3",null,"You haven't submitted any images yet..")},E=a(20),y=a.n(E),O=(a(254),function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).container=document.getElementById("modal-root"),o.el=document.createElement("div"),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.container.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.container.removeChild(this.el)}},{key:"render",value:function(){return y.a.createPortal(this.props.children,this.el)}}]),a}(r.Component)),j=a(32),M=a(43),w=a(247),C=a(243),k=a.n(C),S=a(244),N=a.n(S),I=a(245),T=a.n(I),U=a(246),x=a.n(U),R=function(e){switch(e){case"avatarOne":return k.a;case"avatarTwo":return N.a;case"avatarThree":return T.a;case"avatarFour":return x.a;default:return k.a}},F=function(e){var t=e.avatarId;return c.a.createElement("img",{src:R(t),className:"avatar-img hyve",alt:"avatar"})},P=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).getJoinedDate=function(){var e=new Date(o.props.user.joined);return"".concat(e.getDate()," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]," ").concat(e.getFullYear())},o.selectAvatar=function(e){o.setState({avatar:e})},o.onFieldChange=function(e,t){o.setState(Object(j.a)({},t,e.target.value))},o.onSubmitUpdate=function(e){e.preventDefault();var t=o.state,a=t.name,n=t.avatar;o.setState({loading:!0}),fetch("".concat(p.c,"/profile/").concat(o.props.user.id),{method:"post",headers:{"Content-type":"application/json",Authorization:window.sessionStorage.getItem("token")},body:JSON.stringify({name:a,avatar:n})}).then((function(e){return e.json()})).then((function(e){e.id?(o.props.loadUser(e),o.setState({name:e.name,avatar:e.avatar,updateError:"",loading:!1})):o.setState({updateError:e,loading:!1})})).catch((function(e){o.setState({updateError:"Something went wrong please try again later",loading:!1})}))},o.state={name:o.props.user.name,avatar:o.props.user.avatar,updateError:"",loading:!1},o}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.toggleModal,n=t.user,o=t.showRemoveButton,i=this.state,s=i.name,r=i.avatar,l=this.state.updateError?c.a.createElement("p",{className:"error-message"},this.state.updateError):"",u=this.state.loading?c.a.createElement(f.a,null):"";return c.a.createElement("div",{className:"profile-model"},c.a.createElement("article",{className:"profile-container pa4 ba dark-gray b--black-10 mv4 mw6 shadow-5"},c.a.createElement("span",{className:"close-modal grow",onClick:a},"\xd7"),c.a.createElement("header",null,c.a.createElement("div",{className:"profile-title"},c.a.createElement(F,{avatarId:r,toggleMenu:a}),c.a.createElement("h1",{className:"profile-user-name"},s)),c.a.createElement("div",{className:"profile-info"},c.a.createElement("p",null,"Images submitted: ",n.entries),c.a.createElement("p",null,"Members since: ",this.getJoinedDate()))),c.a.createElement("main",null,c.a.createElement("form",null,c.a.createElement(M.a,{label:"Change your Name",name:"name",type:"text",placeholder:s,onChange:function(t){return e.onFieldChange(t,"name")}}),c.a.createElement(w.a,{title:"Select a new Avatar:",avatar:r,selectAvatar:this.selectAvatar}),c.a.createElement("div",{className:"profile-buttons mt3"},c.a.createElement("input",{onClick:this.onSubmitUpdate,className:"cta-button grow profile-button",type:"submit",value:"Save"}),c.a.createElement("button",{className:"cta-button grow profile-button",onClick:a},"Cancel")),l)),o(n.email),u))}}]),a}(r.Component),A=(a(255),function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).container=document.getElementById("pop-up-root"),o.el=document.createElement("div"),o.el.classList.add("pop-up-container"),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.container.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.container.removeChild(this.el)}},{key:"render",value:function(){return y.a.createPortal(this.props.children,this.el)}}]),a}(r.Component)),D=function(e){var t=e.message,a=e.closePopUp;return setTimeout((function(){var e=document.querySelector(".close-pop-up");e&&e.click()}),8e3),c.a.createElement("div",{className:"pop-up-message"},c.a.createElement("span",{className:"close-pop-up",onClick:a},"\xd7"),c.a.createElement("p",null,t))},J=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).getProfileImages=function(){return fetch("".concat(p.c,"/profile-images/").concat(e.props.user.id),{method:"get",headers:{"Content-type":"application/json",Authorization:window.sessionStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){"Unauthorized"!==t&&t.length&&e.setState({images:t})})).catch((function(e){return console.log("Could not fetch images")}))},e.onImageResubmit=function(t){e.props.onResubmitInput(t),e.props.onRouteChange("home"),e.props.onImageChange(""),e.props.onImageError(""),e.props.onResubmitImageUrl(!0)},e.onSubmitRemoval=function(){fetch("".concat(p.c,"/profile-removal/").concat(e.props.user.id),{method:"post",headers:{"Content-type":"application/json",Authorization:window.sessionStorage.getItem("token")},body:JSON.stringify({email:e.props.user.email,id:e.props.user.id})}).then((function(e){return e.json()})).then((function(t){e.setState({popUpMsg:t}),window.sessionStorage.removeItem("token"),setTimeout((function(){e.props.onRouteChange("signin")}),3e3)})).catch((function(t){e.setState({popUpMsg:"Unable to remove profile"})}))},e.onChangeProtected=function(){e.setState({popUpMsg:"This profile is protected, you may not adjust it"})},e.showRemoveButton=function(t){return["visitor@gmail.com","tester@gmail.com"].indexOf(t)>-1?c.a.createElement("button",{className:"cta-button grow delete-profile-button",onClick:e.onChangeProtected},"Delete Profile"):c.a.createElement("button",{className:"cta-button grow delete-profile-button",onClick:e.onSubmitRemoval},"Delete profile")},e.closePopUp=function(){e.setState({popUpMsg:""})},e.toggleModal=function(){e.setState((function(t){return Object(m.a)(Object(m.a)({},e.state),{},{isProfileOpen:!t.isProfileOpen})}))},e.state={images:[],isProfileOpen:!1,popUpMsg:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getProfileImages()}},{key:"render",value:function(){var e=this.props.user,t=e.entries>0?c.a.createElement(f.a,null):c.a.createElement("p",null,"Go ahead and submit ",c.a.createElement("span",{role:"img","aria-label":"Smirking Face"},"\ud83d\ude0f"));return t=this.state.images.length?c.a.createElement(v,{images:this.state.images,onResubmit:this.onImageResubmit}):c.a.createElement("p",null,"You are not authorized"),c.a.createElement("article",{className:"profile pa4 mb4"},c.a.createElement(F,{avatarId:e.avatar}),c.a.createElement("h1",null,"Hi ",c.a.createElement("span",{className:"capitalize"},e.name)),c.a.createElement(b,{entries:e.entries}),c.a.createElement("button",{className:"cta-button grow",onClick:this.toggleModal},"Edit your profile"),c.a.createElement("section",null,t),this.state.isProfileOpen&&c.a.createElement(O,null,c.a.createElement(P,{showRemoveButton:this.showRemoveButton,isProfileOpen:this.state.isProfileOpen,toggleModal:this.toggleModal,loadUser:this.props.loadUser,user:e})),this.state.popUpMsg&&c.a.createElement(A,null,c.a.createElement(D,{message:this.state.popUpMsg,closePopUp:this.closePopUp})))}}]),a}(r.Component),Y=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement(J,this.props)}}]),a}(r.Component);t.default=Object(l.b)((function(e){return{user:e.userInformation.user}}),(function(e){return{onResubmitInput:function(t){return e(Object(u.a)(t))},onResubmitImageUrl:function(t){return e(Object(u.b)(t))},onImageChange:function(t){return e(Object(u.d)(t))},onImageError:function(t){return e(Object(u.e)(t))}}}))(Y)}}]);
//# sourceMappingURL=3.899c2236.chunk.js.map