(this["webpackJsonpfun-with-images"]=this["webpackJsonpfun-with-images"]||[]).push([[3],{240:function(e,t,r){},241:function(e,t,r){},242:function(e,t,r){e.exports=r.p+"static/media/colorsIcon.16c2fe4a.svg"},243:function(e,t,r){},247:function(e,t,r){"use strict";r.r(t);var o=r(16),n=r(17),a=r(19),l=r(18),s=r(0),c=r.n(s),i=r(30),u=r(2),m=r(14),p=function(e){var t=e.name,r=e.entries,o=r>0?"Welcome back":"Lets start";return c.a.createElement("div",null,c.a.createElement("div",{className:"white f3"},c.a.createElement("h1",null,o," ",c.a.createElement("span",{className:"capitalize"},t)),c.a.createElement("p",null,"Your current entry count is:")),c.a.createElement("div",{className:"white f1"},c.a.createElement("p",null,"#",r)))},g=(r(240),function(e){var t=e.onInputChange,r=e.onButtonSubmit,o=e.imageUrlError,n=e.getColorsError,a=e.getFacesError,l=e.inputValue;return c.a.createElement("div",null,c.a.createElement("p",{className:"f3"},"This App detects faces in images"),c.a.createElement("p",null,"Click on the ",c.a.createElement("strong",null,"paint icon")," to see which colors were detected"),c.a.createElement("div",{className:"center"},c.a.createElement("div",{className:"center form pa4 br3 shadow-5"},c.a.createElement("input",{className:"f4 pa2 w-70 center",value:l,type:"url",onChange:function(e){return t(e.target.value)},onKeyUp:function(e){return function(e){13===e.keyCode&&document.querySelector(".detect").click()}(e)}}),c.a.createElement("button",{className:"detect w-30 grow link ph3 pv2 dib white bg-light-blue",onClick:r},"Detect"))),o,n,a)}),f=(r(241),r(242)),h=r.n(f),d=function(e){var t=e.imageUrl,r=e.onShowClick,o=t?c.a.createElement("img",{id:"imageElement",src:t,alt:"result"}):c.a.createElement("p",null,"Submit an image url to start"),n=t?c.a.createElement("div",{className:"view-colors",onClick:r},c.a.createElement("img",{src:h.a,alt:"View Colors"})):"";return c.a.createElement("div",{className:"center image-holder"},n,o)},E=(r(243),function(e){var t=e.colors,r=e.showColor,o=e.onShowClick,n=r?"block":"none",a=c.a.createElement("p",null,"No colors detected.");if(t.length){var l=t.map((function(e){var t=e.hex,r=e.name;return c.a.createElement("li",{key:t},c.a.createElement("span",{style:{backgroundColor:t}}),"HEX: ",t,", Name: ",r)}));a=c.a.createElement("ul",null,l)}return c.a.createElement("div",{className:"colors-list br3",style:{display:n}},c.a.createElement("span",{className:"close-colors",onClick:o},"X"),c.a.createElement("h2",null,"These colors were detected:"),a)}),b=function(e){Object(a.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.call(this)).onImageUrlSubmit=function(){if(e.props.inputValue){e.props.inputValue!==e.props.imageUrl?/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e.props.inputValue)?(e.props.onImageChange(e.props.inputValue),e.props.onImageError(""),document.querySelectorAll(".bounding-box").forEach((function(e){return e.remove()})),e.getColors(),e.getFaces()):e.props.onImageError("Please enter a valid url"):e.props.onImageError("Please enter a new url")}else e.props.onImageError("Please enter an image url")},e.getColors=function(){fetch("".concat(u.c,"/image-colors"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({input:e.props.inputValue})}).then((function(e){return e.json()})).then((function(t){if(!t||!t.outputs){var r=t||"No response from faces API";throw e.setState({getColorsError:r}),new Error(r)}e.setState({getColorsError:""}),fetch("".concat(u.c,"/image"),{method:"put",headers:{"Content-type":"application/json"},body:JSON.stringify({id:e.props.user.id,url:e.props.imageUrl})}).then((function(e){return e.json()})).then((function(t){e.props.onEntriesUpdate(e.props.user,t)})).catch((function(e){return console.log("getFaces colors: ",e)}));var o=[];t.outputs[0].data.colors.map((function(t){var r={hex:t.w3c.hex,name:t.w3c.name};return o.push(r),e.setState({colors:o})}))})).catch((function(e){return console.log(e)}))},e.getFaces=function(){fetch("".concat(u.c,"/image-faces"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({input:e.props.inputValue})}).then((function(e){return e.json()})).then((function(t){if(!t||!t.outputs){var r=t||"No response from colors API";throw e.setState({getFacesError:r}),new Error(r)}e.setState({getFacesError:""}),e.calculateFaceLocations(t)})).catch((function(e){return console.log("getFaces error: ",e)}))},e.calculateFaceLocations=function(t){var r=document.getElementById("imageElement");if(r){var o=Number(r.width),n=Number(r.height),a=t.outputs[0].data.regions,l=[];a.map((function(t){return e.calculateBoundingBox(t,o,n,l)})),l.map((function(t){return e.displayBoundingBox(t,r)}))}},e.calculateBoundingBox=function(e,t,r,o){var n=e.region_info.bounding_box,a={leftCol:n.left_col*t,topRow:n.top_row*r,RightCol:t-n.right_col*t,bottomRow:r-n.bottom_row*r};o.push(a)},e.displayBoundingBox=function(e,t){var r=document.createElement("DIV");return r.classList.add("bounding-box"),r.style.left="".concat(e.leftCol.toFixed(4),"px"),r.style.top="".concat(e.topRow.toFixed(4),"px"),r.style.right="".concat(e.RightCol.toFixed(4),"px"),r.style.bottom="".concat(e.bottomRow.toFixed(4),"px"),t.parentElement.appendChild(r)},e.toggleColorList=function(){e.setState({showColorList:!e.state.showColorList})},e.state={showColorList:!1,getColorsError:"",getFacesError:"",colors:[]},e}return Object(n.a)(r,[{key:"componentDidMount",value:function(){this.props.resubmit?(this.onImageUrlSubmit(),this.props.onResubmitImageUrl(!1)):(console.log(),this.props.onInputChange(""))}},{key:"render",value:function(){var e=this.props,t=e.user,r=e.imageUrlError,o=e.onInputChange,n=e.imageUrl,a=this.state,l=a.showColorList,s=a.colors,i=r?c.a.createElement("p",{className:"error-message"},r):"",u=this.state.getColorsError?c.a.createElement("p",{className:"error-message"},this.state.getColorsError):"",m=this.state.getFacesError?c.a.createElement("p",{className:"error-message"},this.state.getFacesError):"";return c.a.createElement("article",{className:"pa4 mb4"},c.a.createElement(p,{name:t.name,entries:t.entries}),c.a.createElement(g,{inputValue:this.props.inputValue,imageUrlError:i,getColorsError:u,getFacesError:m,onInputChange:o,onButtonSubmit:this.onImageUrlSubmit}),c.a.createElement(d,{imageUrl:n,onShowClick:this.toggleColorList}),c.a.createElement(E,{colors:s,showColor:l,onShowClick:this.toggleColorList}))}}]),r}(s.Component);t.default=Object(i.b)((function(e){return{inputValue:e.imageUrlInputValue.inputValue,imageUrl:e.imageUrlInputValue.imageUrl,imageUrlError:e.imageUrlInputValue.imageUrlError,resubmit:e.imageUrlInputValue.resubmit,user:e.userInformation.user}}),(function(e){return{onInputChange:function(t){return e(Object(m.f)(t))},onImageChange:function(t){return e(Object(m.d)(t))},onImageError:function(t){return e(Object(m.e)(t))},onResubmitImageUrl:function(t){return e(Object(m.b)(t))},onEntriesUpdate:function(t,r){return e(Object(m.c)(t,r))}}}))(b)}}]);
//# sourceMappingURL=3.e21b04c2.chunk.js.map