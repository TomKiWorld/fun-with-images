(this["webpackJsonpfun-with-images"]=this["webpackJsonpfun-with-images"]||[]).push([[4],{247:function(e,t,a){"use strict";a.r(t);var r=a(7),s=a(8),n=a(10),o=a(9),i=a(0),m=a.n(i),l=a(41),c=a(42),p=a(2),h=function(e){Object(n.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this)).handleKeyUp=function(e){13===e.keyCode&&document.querySelector(".register").click()},s.sanitize=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/gi,(function(e){return t[e]}))},s.onNameChange=function(e){s.setState({name:e.target.value})},s.onEmailChange=function(e){s.setState({email:e.target.value})},s.onPasswordChange=function(e){s.setState({password:e.target.value})},s.onSubmitRegister=function(e){e.preventDefault();var t=s.state,a=t.name,r=t.email,n=t.password,o=!1,i=!1,m=!1;""!==a?(a=s.sanitize(a),s.setState({name:a}),o=!0,s.setState({nameError:""})):s.setState({nameError:"Please enter your name"}),""!==r&&/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(r)?(i=!0,s.setState({emailError:""})):s.setState({emailError:"Please enter your email"}),""!==n?(m=!0,s.setState({passwordError:""})):s.setState({passwordError:"Please enter your password"}),o&&i&&m?fetch("".concat(p.b,"/register"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:a,email:r,password:n})}).then((function(e){return e.json()})).then((function(e){e.id?(s.props.loadUser(e),s.setState({registerError:""}),s.props.onRouteChange("home")):s.setState({registerError:e})})):s.setState({registerError:"Something went wrong"})},s.state={name:"",email:"",password:"",nameError:"",emailError:"",passwordError:"",registerError:""},s}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.nameError?m.a.createElement("p",{className:"error-message"},this.state.nameError):"",t=this.state.emailError?m.a.createElement("p",{className:"error-message"},this.state.emailError):"",a=this.state.passwordError?m.a.createElement("p",{className:"error-message"},this.state.passwordError):"",r=this.state.registerError?m.a.createElement("p",{className:"error-message"},this.state.registerError):"";return m.a.createElement("article",{className:"register br3 ba dark-gray b--black-10 mv4 mw6 shadow-5 center"},m.a.createElement("form",{className:"pa4 black-80"},m.a.createElement("div",{className:"measure"},m.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},m.a.createElement("legend",{className:"f1 fw6 ph0 mh0"},"Register"),m.a.createElement(l.a,{label:"Name",name:"name",type:"text",onChange:this.onNameChange,onKeyUp:this.handleKeyUp}),e,m.a.createElement(l.a,{label:"Email",name:"email-address",type:"email",onChange:this.onEmailChange,onKeyUp:this.handleKeyUp}),t,m.a.createElement(l.a,{label:"Password",name:"password",type:"password",onChange:this.onPasswordChange,onKeyUp:this.handleKeyUp}),a),m.a.createElement(c.a,{value:"Register",type:"submit",onClick:this.onSubmitRegister,extraClass:"register"}),r)))}}]),a}(i.Component);t.default=h}}]);
//# sourceMappingURL=4.45fd68b5.chunk.js.map