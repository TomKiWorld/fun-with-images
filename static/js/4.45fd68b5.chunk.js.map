{"version":3,"sources":["containers/Register/Register.js"],"names":["Register","props","handleKeyUp","e","keyCode","document","querySelector","click","sanitize","string","map","replace","match","onNameChange","event","setState","name","target","value","onEmailChange","email","onPasswordChange","password","onSubmitRegister","preventDefault","state","validName","validEmail","validPassword","nameError","test","emailError","passwordError","fetch","DATABASE","method","headers","body","JSON","stringify","then","response","json","user","id","loadUser","registerError","onRouteChange","this","className","label","type","onChange","onKeyUp","onClick","extraClass","Component"],"mappings":"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","file":"static/js/4.45fd68b5.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport FormInput from '../../components/FormFields/FormInput/FormInput';\nimport FormSubmit from '../../components/FormFields/FormSubmit/FormSubmit';\nimport { DATABASE } from '../../constants';\n\n/**\n * Register component\n * - Allows a user to register to the app by displaying a form\n * \n * Required props:\n * - loadUser => Functon to get user information from state\n * - onRouteChange => Function to change the state of route\n */\nclass Register extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      nameError: '',\n      emailError: '',\n      passwordError: '',\n      registerError: ''\n    }\n  }\n\n  // Allow pressing the enter key and not only the button\n  handleKeyUp = (e) => {\n    if (e.keyCode === 13) {\n      const register = document.querySelector('.register');\n      register.click();\n    }\n  }\n\n  // Sanitize user input\n  sanitize = (string) => {\n    const map = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#x27;',\n        '/': '&#x2F;',\n    };\n    const reg = /[&<>\"'/]/ig;\n    return string.replace(reg, (match)=>(map[match]));\n  }\n\n  // Set name on input change\n  onNameChange = (event) => {\n    this.setState({name: event.target.value })\n  }\n\n  // Set email on input change\n  onEmailChange = (event) => {\n    this.setState({email: event.target.value })\n  }\n\n  // Set password on input change\n  onPasswordChange = (event) => {\n    this.setState({password: event.target.value })\n  }\n\n  // Validate user input and register the user\n  onSubmitRegister = (e) => {\n    e.preventDefault();\n    let {name, email, password } = this.state;\n    let validName = false;\n    let validEmail = false;\n    let validPassword = false;\n    const regexpEmail = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n\n    if (name !== '' ) {\n      name = this.sanitize(name)\n      this.setState({name: name})\n      validName = true\n      this.setState({nameError: ''});\n    } else {\n      this.setState({nameError: 'Please enter your name'});\n    }\n\n    if ((email !== '') && (regexpEmail.test(email))) {\n      validEmail = true\n      this.setState({emailError: ''});\n    } else {\n      this.setState({emailError: 'Please enter your email'});\n    }\n\n    if (password !== '' ) {\n      validPassword = true\n      this.setState({passwordError: ''});\n    } else {\n      this.setState({passwordError: 'Please enter your password'});\n    }  \n\n    if ( validName && validEmail && validPassword ) {\n      fetch(`${DATABASE}/register`, {\n        method: 'post',\n        headers: {'Content-type': 'application/json'},\n        body: JSON.stringify({\n          name: name,\n          email: email,\n          password: password\n        })\n      })\n      .then(response => response.json())\n      .then(user => {\n        if (user.id) {\n          this.props.loadUser(user);\n          this.setState({registerError: ''});\n          this.props.onRouteChange('home');\n        } else {\n          this.setState({registerError: user});\n        }\n      })\n    } else {\n      this.setState({registerError: 'Something went wrong'});\n    }\n  }\n\n  render() {\n    const nameError = this.state.nameError ? <p className='error-message'>{this.state.nameError}</p> : '';\n    const emailError = this.state.emailError ? <p className='error-message'>{this.state.emailError}</p> : '';\n    const passwordError = this.state.passwordError ? <p className='error-message'>{this.state.passwordError}</p> : '';\n    const registerError = this.state.registerError ? <p className='error-message'>{this.state.registerError}</p> : '';\n\n    return (\n      <article className='register br3 ba dark-gray b--black-10 mv4 mw6 shadow-5 center'>\n        <form className='pa4 black-80'>\n          <div className='measure'>\n            <fieldset id='sign_up' className='ba b--transparent ph0 mh0'>\n              <legend className='f1 fw6 ph0 mh0'>Register</legend>\n              <FormInput \n                label='Name'\n                name='name'\n                type='text'\n                onChange={this.onNameChange}\n                onKeyUp={this.handleKeyUp}\n              />\n              {nameError}\n              <FormInput \n                label='Email'\n                name='email-address'\n                type='email'\n                onChange={this.onEmailChange}\n                onKeyUp={this.handleKeyUp}\n              />\n              {emailError}\n              <FormInput \n                label='Password'\n                name='password'\n                type='password'\n                onChange={this.onPasswordChange}\n                onKeyUp={this.handleKeyUp}\n              />\n              {passwordError}\n            </fieldset>\n            <FormSubmit\n              value='Register'\n              type='submit'\n              onClick={this.onSubmitRegister}\n              extraClass='register'\n            />\n            {registerError}\n          </div>\n        </form>        \n      </article>\n    );\n  }\n}\n\nexport default Register;\n"],"sourceRoot":""}