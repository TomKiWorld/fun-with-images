(this["webpackJsonpfun-with-images"]=this["webpackJsonpfun-with-images"]||[]).push([[4],{246:function(e,t,n){},247:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var s=n(10),i=n(11),a=n(13),o=n(12),r=n(0),u=n.n(r),c=n(31),l=n(18),m=n(2),h=(n(246),n(247),function(e){var t=e.id,n=e.url,s=e.onResubmit;return u.a.createElement("div",{id:"ImageCard-".concat(t),className:"ImageCard",style:{backgroundImage:'url("'.concat(n,'")')}},u.a.createElement("button",{className:"card-button",onClick:function(){return s(n)}},"Resubmit"))}),p=n(3),g=n(50),v=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;Object(s.a)(this,n),(i=t.call(this,e)).state={style:{}};return i.width=null,i.height=null,i.left=null,i.top=null,i.transitionTimeout=null,i.updateCall=null,i.element=null,i.settings=Object.assign({},{reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0},i.props.options),i.reverse=i.settings.reverse?-1:1,i.onMouseEnter=i.onMouseEnter.bind(Object(g.a)(i),i.props.onMouseEnter),i.onMouseMove=i.onMouseMove.bind(Object(g.a)(i),i.props.onMouseMove),i.onMouseLeave=i.onMouseLeave.bind(Object(g.a)(i),i.props.onMouseLeave),i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.element=document.getElementById(this.props.elementId)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}},{key:"onMouseEnter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Object(p.a)(Object(p.a)({},this.state.style),{},{willChange:"transform"})})),this.setTransition(),e(t)}},{key:"reset",value:function(){var e=this;window.requestAnimationFrame((function(){e.setState(Object.assign({},e.state,{style:Object(p.a)(Object(p.a)({},e.state.style),{},{transform:"perspective(".concat(e.settings.perspective,"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)")})}))}))}},{key:"onMouseMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return t.persist(),null!==this.updateCall&&window.cancelAnimationFrame(this.updateCall),this.event=t,this.updateCall=requestAnimationFrame(this.update.bind(this,t)),e(t)}},{key:"setTransition",value:function(){var e=this;clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Object(p.a)(Object(p.a)({},this.state.style),{},{transition:"".concat(this.settings.speed,"ms ").concat(this.settings.easing)})})),this.transitionTimeout=setTimeout((function(){e.setState(Object.assign({},e.state,{style:Object(p.a)(Object(p.a)({},e.state.style),{},{transition:""})}))}),this.settings.speed)}},{key:"onMouseLeave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return this.setTransition(),this.settings.reset&&this.reset(),e(t)}},{key:"getValues",value:function(e){var t=(e.nativeEvent.clientX-this.left)/this.width,n=(e.nativeEvent.clientY-this.top)/this.height,s=Math.min(Math.max(t,0),1),i=Math.min(Math.max(n,0),1);return{tiltX:(this.reverse*(this.settings.max/2-s*this.settings.max)).toFixed(2),tiltY:(this.reverse*(i*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*s,percentageY:100*i}}},{key:"updateElementPosition",value:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}},{key:"update",value:function(e){var t=this.getValues(e);this.setState(Object.assign({},this.state,{style:Object(p.a)(Object(p.a)({},this.state.style),{},{transform:"perspective(".concat(this.settings.perspective,"px)\n                      rotateX(").concat("x"===this.settings.axis?0:t.tiltY,"deg)\n                      rotateY(").concat("y"===this.settings.axis?0:t.tiltX,"deg)\n                      scale3d(").concat(this.settings.scale,", ").concat(this.settings.scale,", ").concat(this.settings.scale,")")})})),this.updateCall=null}},{key:"render",value:function(){var e=Object.assign({},this.props.style,this.state.style);return u.a.createElement("div",{style:e,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,options:{max:25}},this.props.children)}}]),n}(r.Component),d=function(e){var t=e.images,n=e.onResubmit;return u.a.createElement("div",null,t.map((function(e){return u.a.createElement(v,{key:e.id,elementId:"ImageCard-".concat(e.id)},u.a.createElement(h,{key:e.id,id:e.id,url:e.url,onResubmit:n}))})))},f=n(30),b=function(e){var t=e.entries;return t>0?u.a.createElement("div",null,u.a.createElement("p",null,"Thank you for using the app ",t," times so far!!"),u.a.createElement("h3",null,"The following images were submitted by you:"),u.a.createElement("p",null,"Note: Some images might have been submitted multipale times")):u.a.createElement("h3",null,"You haven't submitted any images yet..")},y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).getProfileImages=function(){return fetch("".concat(m.c,"/profile-images/").concat(e.props.user.id)).then((function(e){return e.json()})).then((function(t){t.length&&e.setState({images:t})})).catch((function(e){return console.log("Could not fetch images")}))},e.onImageResubmit=function(t){e.props.onResubmitInput(t),e.props.onRouteChange("home"),e.props.onImageChange(""),e.props.onImageError(""),e.props.onResubmitImageUrl(!0)},e.onSubmitRemoval=function(){fetch("".concat(m.c,"/profile-removal/").concat(e.props.user.id),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({email:e.props.user.email,id:e.props.user.id})}).then((function(e){return e.json()})).then((function(e){alert(e)})).then((function(){return e.props.onRouteChange("signin")})).catch((function(e){return alert("Unable to remove profile")}))},e.showRemoveButton=function(t){return 1!==t?u.a.createElement("button",{className:"remove-button",onClick:e.onSubmitRemoval},"Delete your profile"):u.a.createElement("button",{className:"remove-button"},"You can not remove this profile")},e.state={images:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getProfileImages()}},{key:"render",value:function(){var e=this.props.user,t=e.entries>0?u.a.createElement(f.a,null):u.a.createElement("p",null,"Go ahead and submit ",u.a.createElement("span",{role:"img","aria-label":"Smirking Face"},"\ud83d\ude0f"));return this.state.images.length&&(t=u.a.createElement(d,{images:this.state.images,onResubmit:this.onImageResubmit})),u.a.createElement("article",{className:"profile pa4 mb4"},u.a.createElement("h1",null,"Hi ",u.a.createElement("span",{className:"capitalize"},e.name)),u.a.createElement(b,{entries:e.entries}),this.showRemoveButton(e.id),u.a.createElement("section",{className:"images-container"},t))}}]),n}(r.Component),j=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return u.a.createElement(y,this.props)}}]),n}(r.Component);t.default=Object(c.b)((function(e){return{user:e.userInformation.user}}),(function(e){return{onResubmitInput:function(t){return e(Object(l.a)(t))},onResubmitImageUrl:function(t){return e(Object(l.b)(t))},onImageChange:function(t){return e(Object(l.d)(t))},onImageError:function(t){return e(Object(l.e)(t))}}}))(j)}}]);
//# sourceMappingURL=4.5bd0dedd.chunk.js.map