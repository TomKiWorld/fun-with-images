(this["webpackJsonpfun-with-images"]=this["webpackJsonpfun-with-images"]||[]).push([[4],{244:function(e,t,n){},245:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var s=n(16),i=n(17),a=n(19),o=n(18),r=n(0),u=n.n(r),c=n(30),l=n(2),h=n(14),m=(n(244),n(245),function(e){var t=e.id,n=e.url,s=e.onResubmit;return u.a.createElement("div",{id:"ImageCard-".concat(t),className:"ImageCard",style:{backgroundImage:'url("'.concat(n,'")')}},u.a.createElement("button",{className:"card-button",onClick:function(){return s(n)}},"Resubmit"))}),p=n(3),g=n(49),d=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;Object(s.a)(this,n),(i=t.call(this,e)).state={style:{}};return i.width=null,i.height=null,i.left=null,i.top=null,i.transitionTimeout=null,i.updateCall=null,i.element=null,i.settings=Object.assign({},{reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0},i.props.options),i.reverse=i.settings.reverse?-1:1,i.onMouseEnter=i.onMouseEnter.bind(Object(g.a)(i),i.props.onMouseEnter),i.onMouseMove=i.onMouseMove.bind(Object(g.a)(i),i.props.onMouseMove),i.onMouseLeave=i.onMouseLeave.bind(Object(g.a)(i),i.props.onMouseLeave),i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.element=document.getElementById(this.props.elementId)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}},{key:"onMouseEnter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Object(p.a)(Object(p.a)({},this.state.style),{},{willChange:"transform"})})),this.setTransition(),e(t)}},{key:"reset",value:function(){var e=this;window.requestAnimationFrame((function(){e.setState(Object.assign({},e.state,{style:Object(p.a)(Object(p.a)({},e.state.style),{},{transform:"perspective(".concat(e.settings.perspective,"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)")})}))}))}},{key:"onMouseMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return t.persist(),null!==this.updateCall&&window.cancelAnimationFrame(this.updateCall),this.event=t,this.updateCall=requestAnimationFrame(this.update.bind(this,t)),e(t)}},{key:"setTransition",value:function(){var e=this;clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Object(p.a)(Object(p.a)({},this.state.style),{},{transition:"".concat(this.settings.speed,"ms ").concat(this.settings.easing)})})),this.transitionTimeout=setTimeout((function(){e.setState(Object.assign({},e.state,{style:Object(p.a)(Object(p.a)({},e.state.style),{},{transition:""})}))}),this.settings.speed)}},{key:"onMouseLeave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;return this.setTransition(),this.settings.reset&&this.reset(),e(t)}},{key:"getValues",value:function(e){var t=(e.nativeEvent.clientX-this.left)/this.width,n=(e.nativeEvent.clientY-this.top)/this.height,s=Math.min(Math.max(t,0),1),i=Math.min(Math.max(n,0),1);return{tiltX:(this.reverse*(this.settings.max/2-s*this.settings.max)).toFixed(2),tiltY:(this.reverse*(i*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*s,percentageY:100*i}}},{key:"updateElementPosition",value:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}},{key:"update",value:function(e){var t=this.getValues(e);this.setState(Object.assign({},this.state,{style:Object(p.a)(Object(p.a)({},this.state.style),{},{transform:"perspective(".concat(this.settings.perspective,"px)\n                      rotateX(").concat("x"===this.settings.axis?0:t.tiltY,"deg)\n                      rotateY(").concat("y"===this.settings.axis?0:t.tiltX,"deg)\n                      scale3d(").concat(this.settings.scale,", ").concat(this.settings.scale,", ").concat(this.settings.scale,")")})})),this.updateCall=null}},{key:"render",value:function(){var e=Object.assign({},this.props.style,this.state.style);return u.a.createElement("div",{style:e,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,options:{max:25}},this.props.children)}}]),n}(r.Component),v=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this)).onImageResubmit=function(e){i.props.onResubmitInput(e),i.props.onRouteChange("home"),i.props.onImageChange(""),i.props.onImageError(""),i.props.onResubmitImageUrl(!0)},i.onSubmitRemoval=function(){fetch("".concat(l.c,"/profile-removal/").concat(i.props.user.id),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({email:i.props.user.email,id:i.props.user.id})}).then((function(e){return e.json()})).then((function(e){alert(e)})).then((function(){return i.props.onRouteChange("signin")})).catch((function(e){return alert("Unable to remove profile")}))},i.state={images:[]},i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(l.c,"/profile-images/").concat(this.props.user.id)).then((function(e){return e.json()})).then((function(t){t.length&&e.setState({images:t})})).catch((function(e){return console.log("Could not fetch images")}))}},{key:"render",value:function(){var e=this,t=this.props.user,n=1!==t.id?u.a.createElement("button",{className:"remove-button",onClick:this.onSubmitRemoval},"Delete your profile"):"",s=t.entries>0?u.a.createElement("div",null,u.a.createElement("p",null,"Thank you for using the app ",t.entries," times so far!!"),u.a.createElement("h3",null,"The following images were submitted by you:"),u.a.createElement("p",null,"Note: Some images might have been submitted multipale times")):u.a.createElement("h3",null,"You haven't submitted any images yet.. "),i=t.entries>0?u.a.createElement("p",null,"Loading..."):u.a.createElement("p",null,"Go ahead and submit ",u.a.createElement("span",{role:"img","aria-label":"Smirking Face"},"\ud83d\ude0f"));return this.state.images.length&&(i=this.state.images.map((function(t){return u.a.createElement(d,{key:t.id,elementId:"ImageCard-".concat(t.id)},u.a.createElement(m,{key:t.id,id:t.id,url:t.url,onResubmit:e.onImageResubmit}))}))),u.a.createElement("article",{className:"profile pa4 mb4"},u.a.createElement("h1",null,"Hi ",u.a.createElement("span",{className:"capitalize"},t.name)),s,n,u.a.createElement("section",{className:"images-container"},i))}}]),n}(r.Component);t.default=Object(c.b)((function(e){return{user:e.userInformation.user}}),(function(e){return{onResubmitInput:function(t){return e(Object(h.a)(t))},onResubmitImageUrl:function(t){return e(Object(h.b)(t))},onImageChange:function(t){return e(Object(h.d)(t))},onImageError:function(t){return e(Object(h.e)(t))}}}))(v)}}]);
//# sourceMappingURL=4.8c6990ac.chunk.js.map