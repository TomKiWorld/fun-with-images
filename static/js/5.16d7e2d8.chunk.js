(this["webpackJsonpfun-with-images"]=this["webpackJsonpfun-with-images"]||[]).push([[5],{248:function(e,t,a){"use strict";a.r(t);var r=a(33),s=a(10),n=a(11),o=a(13),i=a(12),m=a(0),l=a.n(m),c=a(44),p=a(45),u=a(30),h=a(2),g=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).sanitize=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/gi,(function(e){return t[e]}))},e.onFieldChange=function(t,a){e.setState(Object(r.a)({},a,t.target.value))},e.onSubmitRegister=function(t){t.preventDefault();var a=e.state,r=a.name,s=a.email,n=a.password,o=!1,i=!1,m=!1;""!==r?(r=e.sanitize(r),e.setState({name:r}),o=!0,e.setState({nameError:""})):e.setState({nameError:"Please enter your name"}),""!==s&&/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(s)?(i=!0,e.setState({emailError:""})):e.setState({emailError:"Please enter your email"}),""!==n?(m=!0,e.setState({passwordError:""})):e.setState({passwordError:"Please enter your password"}),o&&i&&m?(e.setState({loading:!0}),fetch("".concat(h.c,"/register"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:r,email:s,password:n})}).then((function(e){return e.json()})).then((function(t){t.id?(e.props.loadUser(t),e.setState({registerError:""}),e.props.onRouteChange("home")):e.setState({registerError:t})}))):e.setState({registerError:"Something went wrong"})},e.state={name:"",email:"",password:"",nameError:"",emailError:"",passwordError:"",registerError:"",loading:!1},e}return Object(n.a)(a,[{key:"render",value:function(){var e=this,t=this.state.nameError?l.a.createElement("p",{className:"error-message"},this.state.nameError):"",a=this.state.emailError?l.a.createElement("p",{className:"error-message"},this.state.emailError):"",r=this.state.passwordError?l.a.createElement("p",{className:"error-message"},this.state.passwordError):"",s=this.state.registerError?l.a.createElement("p",{className:"error-message"},this.state.registerError):"",n=this.state.loading?l.a.createElement(u.a,null):"";return l.a.createElement("article",{className:"register br3 ba dark-gray b--black-10 mv4 mw6 shadow-5 center"},l.a.createElement("form",{className:"pa4 black-80"},l.a.createElement("div",{className:"measure"},l.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},l.a.createElement("h1",{className:"f1 fw6 ph0 mh0"},"Register"),l.a.createElement(c.a,{label:"Name",name:"name",type:"text",onChange:function(t){return e.onFieldChange(t,"name")}}),t,l.a.createElement(c.a,{label:"Email",name:"email-address",type:"email",onChange:function(t){return e.onFieldChange(t,"email")}}),a,l.a.createElement(c.a,{label:"Password",name:"password",type:"password",onChange:function(t){return e.onFieldChange(t,"password")}}),r),l.a.createElement(p.a,{value:"Register",type:"submit",onClick:this.onSubmitRegister,extraClass:"register"}),s)),n)}}]),a}(m.Component);t.default=g}}]);
//# sourceMappingURL=5.16d7e2d8.chunk.js.map