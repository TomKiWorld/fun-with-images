(this["webpackJsonpfun-with-images"]=this["webpackJsonpfun-with-images"]||[]).push([[5],{249:function(e,t,o){},250:function(e,t,o){},251:function(e,t,o){e.exports=o.p+"static/media/colorsIcon.16c2fe4a.svg"},252:function(e,t,o){},259:function(e,t,o){"use strict";o.r(t);var r=o(8),n=o(9),a=o(11),s=o(10),l=o(0),i=o.n(l),c=o(33),u=o(1),m=o(18),p=function(e){var t=e.name,o=e.entries,r=o>0?"Welcome back":"Lets start";return i.a.createElement("div",null,i.a.createElement("div",{className:"white f3"},i.a.createElement("h1",null,r," ",i.a.createElement("span",{className:"capitalize"},t)),i.a.createElement("p",null,"Your current entry count is:")),i.a.createElement("div",{className:"white f1"},i.a.createElement("p",null,"#",o)))},g=(o(249),function(e){var t=e.onInputChange,o=e.onButtonSubmit,r=e.imageUrlError,n=e.getColorsError,a=e.getFacesError,s=e.inputValue;return i.a.createElement("div",null,i.a.createElement("p",{className:"f3"},"This App detects faces in images"),i.a.createElement("p",null,"Click on the ",i.a.createElement("strong",null,"paint icon")," to see which colors were detected"),i.a.createElement("div",{className:"center"},i.a.createElement("form",{className:"center form pa4 br3 shadow-5"},i.a.createElement("input",{className:"f4 pa2 w-70 center",value:s,type:"url",onChange:function(e){return t(e.target.value)}}),i.a.createElement("input",{value:"Detect",type:"submit",className:"detect w-30 grow link ph3 pv2 dib white bg-light-blue",onClick:o}))),r,n,a)}),f=(o(250),o(251)),h=o.n(f),d=function(e){var t=e.imageUrl,o=e.onShowClick,r=t?i.a.createElement("img",{id:"imageElement",src:t,alt:"result"}):i.a.createElement("p",null,"Submit an image url to start"),n=t?i.a.createElement("div",{className:"view-colors",onClick:o},i.a.createElement("img",{src:h.a,alt:"View Colors"})):"";return i.a.createElement("div",{className:"center image-holder"},n,r)},E=(o(252),function(e){var t=e.colors,o=e.showColor,r=e.onShowClick,n=o?"block":"none",a=i.a.createElement("p",null,"No colors detected.");if(t.length){var s=t.map((function(e){var t=e.hex,o=e.name;return i.a.createElement("li",{key:t},i.a.createElement("span",{style:{backgroundColor:t}}),"HEX: ",t,", Name: ",o)}));a=i.a.createElement("ul",null,s)}return i.a.createElement("div",{className:"colors-list br3",style:{display:n}},i.a.createElement("span",{className:"close-colors",onClick:r},"\xd7"),i.a.createElement("h2",null,"These colors were detected:"),a)}),b=function(e){Object(a.a)(o,e);var t=Object(s.a)(o);function o(){var e;return Object(r.a)(this,o),(e=t.call(this)).onImageUrlSubmit=function(t){if(t&&t.preventDefault(),e.props.inputValue){e.props.inputValue!==e.props.imageUrl?/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e.props.inputValue)?(e.props.onImageChange(e.props.inputValue),e.props.onImageError(""),document.querySelectorAll(".bounding-box").forEach((function(e){return e.remove()})),e.getColors(),e.getFaces()):e.props.onImageError("Please enter a valid url"):e.props.onImageError("Please enter a new url")}else e.props.onImageError("Please enter an image url")},e.getColors=function(){fetch("".concat(u.c,"/image-colors"),{method:"post",headers:{"Content-type":"application/json",Authorization:window.sessionStorage.getItem("token")},body:JSON.stringify({input:e.props.inputValue})}).then((function(e){return e.json()})).then((function(t){if(!t||!t.outputs){var o=t||"No response from faces API";throw e.setState({getColorsError:o}),new Error(o)}e.setState({getColorsError:""}),fetch("".concat(u.c,"/image"),{method:"put",headers:{"Content-type":"application/json",Authorization:window.sessionStorage.getItem("token")},body:JSON.stringify({id:e.props.user.id,url:e.props.imageUrl})}).then((function(e){return e.json()})).then((function(t){e.props.onEntriesUpdate(e.props.user,t)})).catch((function(e){return console.log("getFaces colors: ",e)}));var r=[];t.outputs[0].data.colors.map((function(t){var o={hex:t.w3c.hex,name:t.w3c.name};return r.push(o),e.setState({colors:r})}))})).catch((function(e){return console.log(e)}))},e.getFaces=function(){fetch("".concat(u.c,"/image-faces"),{method:"post",headers:{"Content-type":"application/json",Authorization:window.sessionStorage.getItem("token")},body:JSON.stringify({input:e.props.inputValue})}).then((function(e){return e.json()})).then((function(t){if(!t||!t.outputs){var o=t||"No response from colors API";throw e.setState({getFacesError:o}),new Error(o)}e.setState({getFacesError:""}),e.calculateFaceLocations(t)})).catch((function(e){return console.log("getFaces error: ",e)}))},e.calculateFaceLocations=function(t){var o=document.getElementById("imageElement");if(o){var r=Number(o.width),n=Number(o.height),a=t.outputs[0].data.regions,s=[];a.map((function(t){return e.calculateBoundingBox(t,r,n,s)})),s.map((function(t){return e.displayBoundingBox(t,o)}))}},e.calculateBoundingBox=function(e,t,o,r){var n=e.region_info.bounding_box,a={leftCol:n.left_col*t,topRow:n.top_row*o,RightCol:t-n.right_col*t,bottomRow:o-n.bottom_row*o};r.push(a)},e.displayBoundingBox=function(e,t){var o=document.createElement("DIV");return o.classList.add("bounding-box"),o.style.left="".concat(e.leftCol.toFixed(4),"px"),o.style.top="".concat(e.topRow.toFixed(4),"px"),o.style.right="".concat(e.RightCol.toFixed(4),"px"),o.style.bottom="".concat(e.bottomRow.toFixed(4),"px"),t.parentElement.appendChild(o)},e.toggleColorList=function(){e.setState({showColorList:!e.state.showColorList})},e.state={showColorList:!1,getColorsError:"",getFacesError:"",colors:[]},e}return Object(n.a)(o,[{key:"componentDidMount",value:function(){this.props.resubmit?(this.onImageUrlSubmit(),this.props.onResubmitImageUrl(!1)):(console.log(),this.props.onInputChange(""))}},{key:"render",value:function(){var e=this.props,t=e.user,o=e.imageUrlError,r=e.onInputChange,n=e.imageUrl,a=this.state,s=a.showColorList,l=a.colors,c=o?i.a.createElement("p",{className:"error-message"},o):"",u=this.state.getColorsError?i.a.createElement("p",{className:"error-message"},this.state.getColorsError):"",m=this.state.getFacesError?i.a.createElement("p",{className:"error-message"},this.state.getFacesError):"";return i.a.createElement("article",{className:"pa4 mb4"},i.a.createElement(p,{name:t.name,entries:t.entries}),i.a.createElement(g,{inputValue:this.props.inputValue,imageUrlError:c,getColorsError:u,getFacesError:m,onInputChange:r,onButtonSubmit:this.onImageUrlSubmit}),i.a.createElement(d,{imageUrl:n,onShowClick:this.toggleColorList}),i.a.createElement(E,{colors:l,showColor:s,onShowClick:this.toggleColorList}))}}]),o}(l.Component);t.default=Object(c.b)((function(e){return{inputValue:e.imageUrlInputValue.inputValue,imageUrl:e.imageUrlInputValue.imageUrl,imageUrlError:e.imageUrlInputValue.imageUrlError,resubmit:e.imageUrlInputValue.resubmit,user:e.userInformation.user}}),(function(e){return{onInputChange:function(t){return e(Object(m.f)(t))},onImageChange:function(t){return e(Object(m.d)(t))},onImageError:function(t){return e(Object(m.e)(t))},onResubmitImageUrl:function(t){return e(Object(m.b)(t))},onEntriesUpdate:function(t,o){return e(Object(m.c)(t,o))}}}))(b)}}]);
//# sourceMappingURL=5.fd574abe.chunk.js.map