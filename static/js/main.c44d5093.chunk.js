(this["webpackJsonpfun-with-images"]=this["webpackJsonpfun-with-images"]||[]).push([[0],{2:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o}));var a="https://fierce-oasis-21316.herokuapp.com",r="CHANGE_INPUT_VALUE",o="RESUBMIT_INPUT_VALUE"},238:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),i=n.n(o),s=n(30),l=n(29),c=(n(89),n(7)),u=n(8),m=n(10),p=n(9),g=(n(90),n(75)),d=n.n(g),h=function(e){var t=e.onRouteChange,n=e.isSignedIn,a="home"===e.route?r.a.createElement("p",{onClick:function(){return t("profile")},className:"link dim black underline pa3 pointer"},"Profile"):r.a.createElement("p",{onClick:function(){return t("home")},className:"link dim black underline pa3 pointer"},"Home");return n?r.a.createElement("nav",{className:"main-nav end"},a,r.a.createElement("p",{onClick:function(){return t("signin")},className:"link dim black underline pa3 pointer"},"Sign out")):r.a.createElement("nav",{className:"main-nav end"},r.a.createElement("p",{onClick:function(){return t("signin")},className:"link dim black underline pa3 pointer"},"Sign in"),r.a.createElement("p",{onClick:function(){return t("register")},className:"link dim black underline pa3 pointer"},"Register"))},f=(n(238),n(76)),E=n.n(f),b=function(){return r.a.createElement("div",{className:"Logo"},r.a.createElement("img",{src:E.a,alt:"logo"}))},v=function(e){var t=e.isSignedIn,n=e.onRouteChange,a=e.route;return r.a.createElement("header",{className:"site-header"},r.a.createElement(h,{isSignedIn:t,onRouteChange:n,route:a}),r.a.createElement(b,null))},C=n(45),w=n.n(C),y=n(77);function k(e){return function(t){Object(m.a)(a,t);var n=Object(p.a)(a);function a(e){var t;return Object(c.a)(this,a),(t=n.call(this,e)).state={component:null},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=Object(y.a)(w.a.mark((function t(){var n,a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,a=n.default,this.setState({component:a});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.component;return e?r.a.createElement(e,this.props):null}}]),a}(a.Component)}var S=n(41),N=n(42),U=n(2),I=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this)).handleKeyUp=function(e){13===e.keyCode&&document.querySelector(".signIn").click()},a.onEmailChange=function(e){a.setState({signInEmail:e.target.value})},a.onPasswordChange=function(e){a.setState({signInPassword:e.target.value})},a.onSubmitSignIn=function(e){e.preventDefault(),""!==a.state.signInEmail&&""!==a.state.signInPassword?fetch("".concat(U.b,"/signin"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({email:a.state.signInEmail,password:a.state.signInPassword})}).then((function(e){return e.json()})).then((function(e){e.id?(a.props.loadUser(e),a.setState({loginError:""}),a.props.onRouteChange("home")):a.setState({loginError:e})})):a.setState({loginError:"Please make sure both fields are entered"})},a.onSubmitVisitor=function(e){e.preventDefault(),fetch("".concat(U.b,"/signin"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({email:"visitor@gmail.com",password:"visit"})}).then((function(e){return e.json()})).then((function(e){e.id&&(a.props.loadUser(e),a.props.onRouteChange("home"))}))},a.state={signInEmail:"",signInPassword:"",loginError:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.onRouteChange,t=this.state.loginError?r.a.createElement("p",{className:"error-message"},this.state.loginError):"";return r.a.createElement("article",{className:"sign-in br3 ba dark-gray b--black-10 mv4 mw6 shadow-5 center"},r.a.createElement("form",{className:"pa4 black-80",action:"/"},r.a.createElement("div",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f1 fw6 ph0 mh0"},"Sign In"),r.a.createElement(S.a,{label:"Email",name:"email-address",type:"email",onChange:this.onEmailChange,onKeyUp:this.handleKeyUp,extraClass:"inputField"}),r.a.createElement(S.a,{label:"Password",name:"password",type:"password",onChange:this.onPasswordChange,onKeyUp:this.handleKeyUp,extraClass:"inputField"})),t,r.a.createElement(N.a,{value:"Sign in",type:"submit",onClick:this.onSubmitSignIn,extraClass:"signIn"}),r.a.createElement(N.a,{value:"Log in as Visitor",type:"submit",onClick:this.onSubmitVisitor}),r.a.createElement("div",{className:"lh-copy mt3"},r.a.createElement("p",{onClick:function(){return e("register")},className:"f6 link dim black db pointer"},"Register")))))}}]),n}(a.Component),j=function(e){var t=e.name,n=e.entries,a=n>0?"Welcome back":"Lets start";return r.a.createElement("div",null,r.a.createElement("div",{className:"white f3"},r.a.createElement("p",null,a," ",r.a.createElement("span",{className:"capitalize"},t),", your current entry count is:")),r.a.createElement("div",{className:"white f1"},r.a.createElement("p",null,"#",n)))},x=(n(240),function(e){var t=e.onInputChange,n=e.onButtonSubmit,a=e.imageUrlError,o=e.getColorsError,i=e.getFacesError,s=e.inputValue;return r.a.createElement("div",null,r.a.createElement("p",{className:"f3"},"This App detects faces in images"),r.a.createElement("p",null,"Click on the ",r.a.createElement("strong",null,"paint icon")," to see which colors were detected"),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"center form pa4 br3 shadow-5"},r.a.createElement("input",{className:"f4 pa2 w-70 center",value:s,type:"url",onChange:t,onKeyUp:function(e){return function(e){13===e.keyCode&&document.querySelector(".detect").click()}(e)}}),r.a.createElement("button",{className:"detect w-30 grow link ph3 pv2 dib white bg-light-blue",onClick:n},"Detect"))),a,o,i)}),R=(n(241),n(78)),O=n.n(R),F=function(e){var t=e.imageUrl,n=e.onShowClick,a=t?r.a.createElement("img",{id:"imageElement",src:t,alt:"result"}):r.a.createElement("p",null,"Submit an image url to start"),o=t?r.a.createElement("div",{className:"view-colors",onClick:n},r.a.createElement("img",{src:O.a,alt:"View Colors"})):"";return r.a.createElement("div",{className:"center image-holder"},o,a)},V=(n(242),function(e){var t=e.colors,n=e.showColor,a=e.onShowClick,o=n?"block":"none",i=r.a.createElement("p",null,"No colors detected.");if(t.length){var s=t.map((function(e){var t=e.hex,n=e.name;return r.a.createElement("li",{key:t},r.a.createElement("span",{style:{backgroundColor:t}}),"HEX: ",t,", Name: ",n)}));i=r.a.createElement("ul",null,s)}return r.a.createElement("div",{className:"colors-list br3",style:{display:o}},r.a.createElement("span",{className:"close-colors",onClick:a},"X"),r.a.createElement("h2",null,"These colors were detected:"),i)}),P=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).toggleColorList=function(){e.setState({showColorList:!e.state.showColorList})},e.state={showColorList:!1},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.userName,n=e.entries,a=e.imageUrlError,o=e.getColorsError,i=e.getFacesError,s=e.onInputChange,l=e.onImageUrlSubmit,c=e.imageUrl,u=e.boxes,m=e.colors,p=this.state.showColorList;return r.a.createElement("article",{className:"pa4 mb4"},r.a.createElement(j,{name:t,entries:n}),r.a.createElement(x,{inputValue:this.props.inputValue,imageUrlError:a,getColorsError:o,getFacesError:i,onInputChange:s,onButtonSubmit:l}),r.a.createElement(F,{imageUrl:c,boxes:u,onShowClick:this.toggleColorList}),r.a.createElement(V,{colors:m,showColor:p,onShowClick:this.toggleColorList}))}}]),n}(a.Component),L=function(){return r.a.createElement("footer",{className:"site-footer"},r.a.createElement("p",null,"Made with ",r.a.createElement("span",null,"\u2665")," by ",r.a.createElement("a",{href:"https://github.com/TomKiWorld",target:"_blank",rel:"noopener noreferrer"},"TomKiWorld")))},B=function(e){return{type:U.a,payload:e}},_={particles:{line_linked:{shadow:{enable:!0,color:"#3CA9D1",blur:5}},number:{value:50,density:{enable:!0,value_area:500}}}},K={imageUrl:"",imageUrlError:"",getColorsError:"",getFacesError:"",colors:[],route:"signin",isSignedIn:!1,user:{id:"",name:"",email:"",entries:0,joined:""}},A=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).loadUser=function(t){e.setState({user:{id:t.id,name:t.name,email:t.email,entries:t.entries,joined:t.joined}})},e.onImageUrlSubmit=function(){if(e.props.inputValue){e.props.inputValue!==e.state.imageUrl?/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e.props.inputValue)?(e.setState({imageUrl:e.props.inputValue,imageUrlError:""}),document.querySelectorAll(".bounding-box").forEach((function(e){return e.remove()})),e.getColors(),e.getFaces()):e.setState({imageUrlError:"Please enter a valid url"}):e.setState({imageUrlError:"Please enter a new url"})}else e.setState({imageUrlError:"Please enter an image url"})},e.onImageResubmit=function(t){e.props.onResubmitInput(t),e.onRouteChange("home"),e.setState({imageUrl:"",imageUrlError:""}),window.setTimeout((function(){e.onImageUrlSubmit()}),500)},e.getColors=function(){fetch("".concat(U.b,"/image-colors"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({input:e.props.inputValue})}).then((function(e){return e.json()})).then((function(t){if(!t||!t.outputs){var n=t||"No response from faces API";throw e.setState({getColorsError:n}),new Error(n)}e.setState({getColorsError:""}),fetch("".concat(U.b,"/image"),{method:"put",headers:{"Content-type":"application/json"},body:JSON.stringify({id:e.state.user.id,url:e.state.imageUrl})}).then((function(e){return e.json()})).then((function(t){e.setState(Object.assign(e.state.user,{entries:t}))})).catch((function(e){return console.log("getFaces colors: ",e)}));var a=[];t.outputs[0].data.colors.map((function(t){var n={hex:t.w3c.hex,name:t.w3c.name};return a.push(n),e.setState({colors:a})}))})).catch((function(e){return console.log(e)}))},e.getFaces=function(){fetch("".concat(U.b,"/image-faces"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({input:e.props.inputValue})}).then((function(e){return e.json()})).then((function(t){if(!t||!t.outputs){var n=t||"No response from colors API";throw e.setState({getFacesError:n}),new Error(n)}e.setState({getFacesError:""}),e.calculateFaceLocations(t)})).catch((function(e){return console.log("getFaces error: ",e)}))},e.calculateFaceLocations=function(t){var n=document.getElementById("imageElement");if(n){var a=Number(n.width),r=Number(n.height),o=t.outputs[0].data.regions,i=[];o.map((function(t){return e.calculateBoundingBox(t,a,r,i)})),i.map((function(t){return e.displayBoundingBox(t,n)}))}},e.calculateBoundingBox=function(e,t,n,a){var r=e.region_info.bounding_box,o={leftCol:r.left_col*t,topRow:r.top_row*n,RightCol:t-r.right_col*t,bottomRow:n-r.bottom_row*n};a.push(o)},e.displayBoundingBox=function(e,t){var n=document.createElement("DIV");return n.classList.add("bounding-box"),n.style.left="".concat(e.leftCol.toFixed(4),"px"),n.style.top="".concat(e.topRow.toFixed(4),"px"),n.style.right="".concat(e.RightCol.toFixed(4),"px"),n.style.bottom="".concat(e.bottomRow.toFixed(4),"px"),t.parentElement.appendChild(n)},e.onRouteChange=function(t){"home"===t||"profile"===t?e.setState({isSignedIn:!0}):e.setState({isSignedIn:!1}),"signin"===t&&(e.setState(K),B("")),"home"===t&&e.setState({imageUrl:"",imageUrlError:""}),e.setState({route:t})},e.state=K,e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isSignedIn,a=e.imageUrl,o=e.boxes,i=e.colors,s=e.route,l=this.state.imageUrlError?r.a.createElement("p",{className:"error-message"},this.state.imageUrlError):"",c=this.state.getColorsError?r.a.createElement("p",{className:"error-message"},this.state.getColorsError):"",u=this.state.getFacesError?r.a.createElement("p",{className:"error-message"},this.state.getFacesError):"",m=this.props,p=m.inputValue,g=m.onInputChange,h="";switch(s){case"home":h=r.a.createElement(P,{userName:this.state.user.name,entries:this.state.user.entries,inputValue:p,imageUrlError:l,getColorsError:c,getFacesError:u,onInputChange:g,onImageUrlSubmit:this.onImageUrlSubmit,imageUrl:a,boxes:o,colors:i});break;case"register":var f=k((function(){return n.e(4).then(n.bind(null,247))}));h=r.a.createElement(f,{loadUser:this.loadUser,onRouteChange:this.onRouteChange});break;case"profile":var E=k((function(){return n.e(3).then(n.bind(null,248))}));h=r.a.createElement(E,{database:U.b,userId:this.state.user.id,userName:this.state.user.name,userEmail:this.state.user.email,entries:this.state.user.entries,onRouteChange:this.onRouteChange,onResubmit:this.onImageResubmit});break;default:h=r.a.createElement(I,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})}return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{className:"particles",params:_}),r.a.createElement(v,{isSignedIn:t,onRouteChange:this.onRouteChange,route:this.state.route}),h,r.a.createElement(L,null))}}]),a}(a.Component),T=Object(s.b)((function(e){return{inputValue:e.inputValue}}),(function(e){return{onInputChange:function(t){return e(B(t.target.value))},onResubmitInput:function(t){return e(function(e){return{type:U.c,payload:e}}(t))}}}))(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(17),z={inputValue:""},D=(n(243),Object(l.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case U.a:case U.c:return Object(J.a)(Object(J.a)({},e),{},{inputValue:t.payload});default:return e}})));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:D},r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.label,n=e.name,a=e.type,o=e.onChange,i=e.onKeyUp,s=e.extraClass,l=null!==s&&void 0!==s?s:"",c="";switch(n){case"password":c="current-password";break;case"email-address":c="email";break;case"name":c="name";break;default:c=""}return r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:a},t,r.a.createElement("input",{onChange:o,onKeyUp:i,className:"".concat(l," pa2 input-reset ba b--black bg-transparent hover-bg-black hover-white w-100"),type:a,name:n,id:n,autoComplete:c})))}},42:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.value,n=e.type,a=e.onClick,o=e.extraClass,i=null!==o&&void 0!==o?o:"";return r.a.createElement("div",{className:"mt3"},r.a.createElement("input",{onClick:a,className:"".concat(i," b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib"),type:n,value:t}))}},76:function(e,t,n){e.exports=n.p+"static/media/funGif.1e4a7e6e.gif"},78:function(e,t,n){e.exports=n.p+"static/media/colorsIcon.16c2fe4a.svg"},79:function(e,t,n){e.exports=n(244)},89:function(e,t,n){},90:function(e,t,n){}},[[79,1,2]]]);
//# sourceMappingURL=main.c44d5093.chunk.js.map